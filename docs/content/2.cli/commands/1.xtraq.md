---
title: xtraq (default command)
description: Default invocation behaviour when no subcommand is supplied. Running the CLI without an explicit subcommand is the fastest way to refresh metadata and generate artefacts in one shot. The root invocation behaves exactly like `xtraq build --refresh-snapshot`.
---

## Execution Pipeline

1. Resolve project context via `.xtraqconfig` (prompting to run `xtraq init` when the file is missing or invalid).
2. Refresh the schema snapshot using the configured connection string (`XTRAQ_GENERATOR_DB`).
3. Generate artefacts into the configured output directory (default `Xtraq/`) and optionally emit telemetry.

If the snapshot refresh fails, the build phase is skipped and the process exits with the snapshot error code.

## Configuration Expectations

- `.xtraqconfig` must be tracked in source control so the command can locate the namespace, output directory, and schema filters.
- Secrets such as `XTRAQ_GENERATOR_DB` can come from environment variables, `.env`, or secrets managers.
- Snapshot and build respect overrides from command-line flags just like their standalone counterparts (for example `--procedure` or `--telemetry`).

## Behavior Contract

| Aspect         | Details                                                                                                                                                |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Invocation     | `xtraq` (no subcommand).                                                                                                                               |
| Effective call | Equivalent to `xtraq build --refresh-snapshot`.                                                                                                        |
| Reads          | `.xtraqconfig`, `.env` (when present), `.xtraq/snapshots/**/*.json`, SQL Server metadata, template files under `src/Templates/`.                       |
| Writes         | Updated `.xtraq/snapshots/**`, generated artefacts beneath `<OutputDir>`, telemetry files when enabled.                                                |
| Exit codes     | `0` success; non-zero indicates configuration, snapshot, or generation failures.                                                                       |
| Side effects   | Prompts to bootstrap `.xtraqconfig` if missing, schedules the background update check unless disabled, and honours telemetry flags for summary export. |

## Examples

```bash
# Refresh snapshot, build artefacts, and stream concise output
xtraq

# Run in verbose mode while limiting work to a single schema
xtraq --verbose --procedure core.%
```
